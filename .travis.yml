language: python
python:
  - "3.5"
cache: pip

install:
  - pip install -r requirements.txt

script:
  - wget "$LIST_URL" -O list.txt -q
  - touch log.txt
  - |
    while IFS='' read -r line || [[ -n "$line" ]]; do

        # strip trailing line break
        line=$(echo $line|tr -d '\r')

        # skip comments
        if [[ $line != "#"* ]] && [[ $line != "" ]]; then
          coursera-dl -u "$USERNAME" -p "$PASSWORD" "$line" > log.txt
        fi
    done < list.txt
  - python convert.py
